{"version":3,"sources":["webpack:///./src/components/modules/StoryElement.js"],"names":["StoryElement","props","storyContCss","contentContCss","css","ImgCss","contentWrapperCss","currentSlide","window","innerHeight","imgContCss","objectFit","videoContCss","resumeButtonCss","Libs","Mq","moreTab","lessPab","closeButtonCss","helpButtonCss","BlockItem","childMargin","childMarginSp","Func","getPcSpVwValue","BlockImageCss","DetailBlockCss","ItemCss","InnerBlockItemCss","resumeClickHandler","event","metaInfoList","indicator","getIsPause","restart","pause","closeClickHandler","dispatch","langKey","getLangKey","complete","cont","document","querySelector","category","classList","contains","Transition","TrigerFadeTransition","helpClickHandler","OverlayOpen","element","Modules","getElementImage","content","inner","num","imgSrc","WindowResize","currentType","imageSp","image","ratio","sizes","aspectRatio","fluid","src","className","ImageElement","styles","onload","setMedialoaded","mediaRefs","mediaCounter","VideoElement","ontimeupdate","instance","update","target","currentTime","onloadmetadata","duration","setVideoMetaData","getElementText","elementType","getTextType","type","class","text","getElementLink","LinkElement","icon","label","getBlockElement","isInner","contCss","absoluteItemCss","isImage","bodyContent","body","map","bodyItem","i","spacePc","spaceSp","internal","RichText","field","EmbedElement","imgLoadedList","BlockElement","indicatorResume","video","console","log","play","imgloadStartComplete","setLoadImage","resume","id","imgLoadCheckerFlag","remove","imgLoadedChecker","init","add","me","setTimeout","loadImage","len","isInitLoadCounter","storyItems","length","loadImageCounter","style","display","story","slug","items","React","createRef","storyCont","currentContentName","itemNum","counter","state","ready","barHeight","componentDidMount","this","setState","getLibs","AtomsByClassName","shouldComponentUpdate","nextProps","nextState","screenH","clientHeight","height","current","isNaN","sliderId","render","next","prev","ref","el","value","name","for","tabindex","onClick","stopPropagation","ButtonClose","color","activeClass","clickHandler","url","fontPc","fontSize","bold","letterSpacing","fontSp","item","__typename","PureComponent","connect","filter","Number","SliderReducer","TransitionReducer","ResizeReducer","screenHeight"],"mappings":"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","file":"b650454d-c3d332a72c443d7fd986.js","sourcesContent":["import React, { PureComponent } from \"react\";\n\nimport { OverlayOpen } from \"libs/redux/action\";\n\nimport * as Transition from \"../Transition\";\nimport { css } from \"@emotion/react\";\n\nimport * as Modules from \"./\";\nimport { connect } from \"react-redux\";\nimport { WindowResize } from \"libs/redux/event/WindowResize\";\nimport * as Libs from \"libs\";\nexport class StoryElement extends PureComponent {\n\tstoryContCss = () => {\n\t\treturn css`\n      position: relative;\n     /* ${Libs.Styles.Mq.moreTab} {\n        height: 100vh;\n      }\n      ${Libs.Styles.Mq.lessPab} {\n        height: ${\n\t\t\t\t\ttypeof window !== `undefined` ? window.innerHeight + \"px\" : \"100vh\"\n\t\t\t\t};\n      }*/\n    `;\n\t};\n\tcontentContCss = () => {\n\t\treturn css``;\n\t};\n\tImgCss = () => {\n\t\treturn css`\n\t\t\tpointer-events: none;\n\t\t`;\n\t};\n\tcontentWrapperCss = () => {\n\t\treturn css`\n\t\t\t&:nth-of-type(${this.currentSlide + 1}) {\n\t\t\t\tz-index: 1;\n\t\t\t\tvisibility: visible;\n\t\t\t}\n\t\t\t&:nth-of-type(n + 2) {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\tvisibility: hidden;\n\t\t\tposition: absolute;\n\t\t\twidth: 100vw;\n\t\t\theight: ${typeof window !== `undefined`\n\t\t\t\t? window.innerHeight + \"px\"\n\t\t\t\t: \"100vh\"};\n\n\t\t\tz-index: 0;\n\t\t`;\n\t};\n\timgContCss = (objectFit) => {\n\t\tobjectFit = objectFit ? objectFit : \"cover\";\n\t\treturn css`\n\t\t\theight: ${typeof window !== `undefined`\n\t\t\t\t? window.innerHeight + \"px\"\n\t\t\t\t: \"100vh\"};\n\t\t\tmargin-left: auto;\n\t\t\tmargin-right: auto;\n\t\t\t.gatsby-image-wrapper {\n\t\t\t\theight: 100%;\n\t\t\t\timg {\n\t\t\t\t\tobject-fit: ${objectFit} !important;\n\t\t\t\t}\n\t\t\t}\n\t\t`;\n\t};\n\tvideoContCss = (objectFit) => {\n\t\tobjectFit = objectFit ? objectFit : \"cover\";\n\t\treturn css`\n\t\t\theight: ${typeof window !== `undefined`\n\t\t\t\t? window.innerHeight + \"px\"\n\t\t\t\t: \"100vh\"};\n\t\t\tmargin-left: auto;\n\t\t\tmargin-right: auto;\n\n\t\t\theight: 100%;\n\t\t\tvideo {\n\t\t\t\tobject-fit: ${objectFit} !important;\n\t\t\t}\n\t\t`;\n\t};\n\tresumeButtonCss = () => css`\n\t\twidth: 50px;\n\t\theight: 50px;\n\t\tposition: absolute;\n\t\tright: 70px;\n\t\ttop: 25px;\n\t\tz-index: 1000;\n\t\ttransition: opacity 0.3s cubic-bezier(0.71, 0.01, 0.45, 1.01);\n\t\t.on-pause & {\n\t\t\topacity: 0;\n\t\t}\n\t\t${Libs.Styles.Mq.moreTab} {\n\t\t\tright: 70px;\n\t\t}\n\t\t${Libs.Styles.Mq.lessPab} {\n\t\t\tright: 60px;\n\t\t}\n\t\tlabel {\n\t\t\toutline: none;\n\t\t\tdisplay: block;\n\t\t\twidth: 50px;\n\t\t\theight: 50px;\n\t\t\tcursor: pointer;\n\t\t\t/*background-color:#f00;*/\n\t\t\tspan {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: block;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\twidth: 25px;\n\t\t\t\theight: 30px;\n\t\t\t\tmargin: 0 auto;\n\t\t\t\tborder-color: transparent transparent transparent #ffffff;\n\t\t\t\ttransition: 100ms all ease;\n\t\t\t\twill-change: border-width;\n\n\t\t\t\t/* paused state*/\n\t\t\t\tborder-style: double;\n\t\t\t\tborder-width: 0px 0px 0px 25px;\n\t\t\t\ttop: 50%;\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t}\n\t\t}\n\t\tinput[type=\"checkbox\"] {\n\t\t\tvisibility: hidden;\n\t\t\toutline: none;\n\t\t\tdisplay: none;\n\t\t\t&:checked + label {\n\t\t\t\tspan {\n\t\t\t\t\t/* play state*/\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\tborder-width: 15px 0 15px 25px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n\tcloseButtonCss = () => css`\n\t\tposition: absolute;\n\t\tright: 20px;\n\t\ttop: 30px;\n\t\tz-index: 1000;\n\t\ttransition: opacity 0.3s cubic-bezier(0.71, 0.01, 0.45, 1.01);\n\t\t.on-pause & {\n\t\t\topacity: 0;\n\t\t}\n\t`;\n\thelpButtonCss = () => css`\n\t\tposition: absolute;\n\t\tright: 20px;\n\t\ttop: 80px;\n\t\tz-index: 1000;\n\t\ttransition: opacity 0.3s cubic-bezier(0.71, 0.01, 0.45, 1.01);\n\t\tspan {\n\t\t\tpointer-events: none;\n\t\t}\n\t\t.on-pause & {\n\t\t\topacity: 0;\n\t\t}\n\t`;\n\tBlockItem = (childMargin = 80, childMarginSp = 60) => {\n\t\treturn css`\n\t\t\tposition: absolute;\n\t\t\tz-index: 100;\n\n\t\t\t${Libs.Common.Func.getPcSpVwValue(\n\t\t\t\t\"margin-top\",\n\t\t\t\tchildMargin,\n\t\t\t\tchildMarginSp\n\t\t\t)};\n\t\t\t&:first-child {\n\t\t\t\tmargin-top: 0px;\n\t\t\t}\n\t\t`;\n\t};\n\tBlockImageCss = () => {\n\t\treturn css`\n\t\t\tposition: absolute;\n\t\t\tz-index: 99;\n\t\t\ttop: 0px;\n\t\t\tleft: 0px;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t`;\n\t};\n\tDetailBlockCss = () => {\n\t\treturn css`\n\t\t\tposition: absolute;\n\t\t\tz-index: 101;\n\n\t\t\theight: auto;\n\n\t\t\t${Libs.Styles.Mq.moreTab} {\n\t\t\t\twidth: 40vw;\n\t\t\t\tbottom: 10vh;\n\t\t\t\tleft: 10vw;\n\t\t\t}\n\t\t\t${Libs.Styles.Mq.lessPab} {\n\t\t\t\twidth: 88vw;\n\t\t\t\tbottom: 5vh;\n\t\t\t\tleft: 6vw;\n\t\t\t}\n\t\t`;\n\t};\n\tItemCss = () => {\n\t\treturn css`\n\t\t\tz-index: 110;\n\t\t`;\n\t};\n\tInnerBlockItemCss = (childMargin = 30, childMarginSp = 10) => {\n\t\treturn css`\n\t\t\t${Libs.Common.Func.getPcSpVwValue(\n\t\t\t\t\"margin-top\",\n\t\t\t\tchildMargin,\n\t\t\t\tchildMarginSp\n\t\t\t)};\n\t\t\t&:first-child {\n\t\t\t\tmargin-top: 0px;\n\t\t\t}\n\t\t`;\n\t};\n\t// object-fit: contain !important;\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst { story, slug } = this.props;\n\t\tthis.items = story[0].items;\n\t\tthis.indicator = React.createRef();\n\t\tthis.storyCont = React.createRef();\n\t\tthis.currentSlide = 0;\n\t\tthis.currentContentName = null;\n\t\tthis.itemNum = 0;\n\t\tthis.counter = 0;\n\t\tthis.imgLoadedList = [];\n\t\tthis.imgLoadCheckerFlag = false;\n\t\tthis.isInitLoadCounter = 3;\n\t\tthis.state = {\n\t\t\tready: false,\n\t\t};\n\t\tthis.mediaRefs = [];\n\t\tthis.mediaCounter = 0;\n\n\t\tthis.metaInfoList = [];\n\t\tthis.barHeight = 0;\n\t\tthis.loadImageCounter = 1;\n\n\t\tthis.imgloadStartComplete = false;\n\t}\n\tresumeClickHandler = (event) => {\n\t\tconst video = this.metaInfoList[this.currentSlide];\n\n\t\t// this.indicator.pause()\n\t\tif (!this.indicator.getIsPause()) {\n\t\t\tthis.indicator.pause();\n\t\t} else {\n\t\t\tthis.indicator.restart();\n\t\t}\n\n\t\treturn false;\n\t};\n\tcloseClickHandler = () => {\n\t\tconst { dispatch } = this.props;\n\t\tlet langKey = Libs.Common.Func.getLangKey();\n\t\tthis.indicator.complete();\n\t\tconst cont = document.querySelector(\"html\");\n\t\tlet category = null;\n\t\tif (cont.classList.contains(\"category-works\")) {\n\t\t\tcategory = \"works\";\n\t\t} else if (cont.classList.contains(\"category-journal\")) {\n\t\t\tcategory = \"journal\";\n\t\t} else if (cont.classList.contains(\"category-shop\")) {\n\t\t\tcategory = \"shop\";\n\t\t}\n\t\tTransition.TrigerFadeTransition.TrigerFadeTransition(\n\t\t\t`/${langKey}/${category}/`,\n\t\t\tdispatch\n\t\t);\n\t};\n\thelpClickHandler = () => {\n\t\tconst { dispatch } = this.props;\n\t\tdispatch(OverlayOpen({ element: Modules.Help }));\n\t};\n\tgetElementImage = (content, css, inner, num) => {\n\t\tconst imgSrc = WindowResize.currentType(WindowResize.lessPab)\n\t\t\t? content.imageSp\n\t\t\t\t? content.imageSp\n\t\t\t\t: content.image\n\t\t\t: content.image;\n\n\t\tthis.ratio = imgSrc && imgSrc.sizes ? imgSrc.sizes.aspectRatio : 1;\n\t\tif (!inner) {\n\t\t\t//content.widthPc = getElementWidth(content, \"pc\")\n\t\t\t//content.widthSp = getElementWidth(content, \"sp\")\n\t\t}\n\n\t\tif (!content.image) {\n\t\t\treturn \"\";\n\t\t} else {\n\t\t\tif (content.image.fluid && content.image.fluid.src) {\n\t\t\t\treturn (\n\t\t\t\t\t<div css={css} className={\"story-item\"}>\n\t\t\t\t\t\t<Libs.Atoms.ImageElement\n\t\t\t\t\t\t\tcss={[this.imgContCss(content.objectFit), this.ImgCss()]}\n\t\t\t\t\t\t\tstyles={content}\n\t\t\t\t\t\t\tonload={(props = num) => {\n\t\t\t\t\t\t\t\tthis.setMedialoaded(num);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.mediaRefs[num] = true;\n\t\t\t\tthis.mediaCounter++;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div css={css} className={\"story-item\"}>\n\t\t\t\t\t\t<Libs.Atoms.VideoElement\n\t\t\t\t\t\t\tontimeupdate={(instance, event, props = num) => {\n\t\t\t\t\t\t\t\tif (this.indicator)\n\t\t\t\t\t\t\t\t\tthis.indicator.update(num, event.target.currentTime);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcss={[this.videoContCss(content.objectFit), this.ImgCss()]}\n\t\t\t\t\t\t\tstyles={content}\n\t\t\t\t\t\t\tonloadmetadata={(instance, duration, props = num) => {\n\t\t\t\t\t\t\t\tthis.setVideoMetaData(num, instance, duration);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonload={(instance, props = num) => {\n\t\t\t\t\t\t\t\tthis.setMedialoaded(num, instance);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\tgetElementText = (content, css, inner) => {\n\t\tconst elementType = Libs.Common.Func.getTextType(content.type);\n\n\t\treturn (\n\t\t\t<elementType.element\n\t\t\t\tcss={css}\n\t\t\t\tstyles={content}\n\t\t\t\tclassName={content.class ? content.class : \"\"}\n\t\t\t>\n\t\t\t\t{content.text}\n\t\t\t</elementType.element>\n\t\t);\n\t};\n\tgetElementLink = (content, css, inner) => {\n\t\treturn (\n\t\t\t<Libs.Atoms.LinkElement\n\t\t\t\ticon={content.icon}\n\t\t\t\tcss={css}\n\t\t\t\tclassName={content.class}\n\t\t\t\tstyles={content}\n\t\t\t>\n\t\t\t\t{content.label}\n\t\t\t</Libs.Atoms.LinkElement>\n\t\t);\n\t};\n\tgetBlockElement = (content, isInner, num) => {\n\t\tconst contCss = isInner ? this.ItemCss : this.contentWrapperCss;\n\t\tconst absoluteItemCss = isInner ? null : this.ItemCss;\n\t\tconst detailItemCss = isInner ? null : this.ItemCss;\n\t\tconst childMargin = content.childMargin ? content.childMargin : 15;\n\t\tconst childMarginSp = content.childMarginSp ? content.childMarginSp : 10;\n\t\tlet isImage = false;\n\n\t\tconst bodyContent = content.body.map((bodyItem, i) => {\n\t\t\tif (!bodyItem.spacePc && i !== 0 && isInner) {\n\t\t\t\tbodyItem.spacePc = `${childMargin} 0 0 0`;\n\t\t\t}\n\t\t\tif (!bodyItem.spaceSp && i !== 0 && isInner) {\n\t\t\t\tbodyItem.spaceSp = `${childMarginSp} 0 0 0`;\n\t\t\t}\n\n\t\t\tif (bodyItem.internal.type === \"ContentfulElementImage\") {\n\t\t\t\tisImage = true;\n\t\t\t\treturn this.getElementImage(bodyItem, this.BlockImageCss, true, num);\n\t\t\t} else if (bodyItem.internal.type === \"ContentfulElementText\") {\n\t\t\t\treturn this.getElementText(bodyItem, isInner ? null : this.ItemCss);\n\t\t\t} else if (bodyItem.internal.type === \"ContentfulElementTextField\") {\n\t\t\t\treturn (\n\t\t\t\t\t<Libs.Atoms.RichText\n\t\t\t\t\t\tstyles={bodyItem}\n\t\t\t\t\t\tcss={isInner ? null : this.ItemCss}\n\t\t\t\t\t\tclassName={bodyItem.class ? bodyItem.class : \"\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t{bodyItem.field}\n\t\t\t\t\t</Libs.Atoms.RichText>\n\t\t\t\t);\n\t\t\t} else if (bodyItem.internal.type === \"ContentfulElementLink\") {\n\t\t\t\treturn this.getElementLink(bodyItem, isInner ? null : this.ItemCss);\n\t\t\t} else if (bodyItem.internal.type === \"ContentfulElementEmbed\") {\n\t\t\t\treturn (\n\t\t\t\t\t<Libs.Atoms.EmbedElement\n\t\t\t\t\t\tcss={absoluteItemCss}\n\t\t\t\t\t\tstyles={bodyItem}\n\t\t\t\t\t></Libs.Atoms.EmbedElement>\n\t\t\t\t);\n\t\t\t} else if (bodyItem.internal.type === \"ContentfulElementBlock\") {\n\t\t\t\treturn this.getBlockElement(bodyItem, true);\n\t\t\t}\n\t\t});\n\t\tif (num && !isImage) {\n\t\t\tthis.imgLoadedList[num] = true;\n\t\t}\n\t\treturn (\n\t\t\t<Libs.Atoms.BlockElement\n\t\t\t\tclassName={\"story-item\"}\n\t\t\t\tcss={contCss}\n\t\t\t\tstyles={content}\n\t\t\t>\n\t\t\t\t{bodyContent}\n\t\t\t</Libs.Atoms.BlockElement>\n\t\t);\n\t};\n\n\tindicatorResume = () => {\n\t\tconst video = this.metaInfoList[this.currentSlide];\n\t\tif (this.mediaRefs[this.currentSlide] && !video) {\n\t\t\tconsole.log(\"ERROR\");\n\t\t}\n\t\tif (video) {\n\t\t\tvideo.instance.play();\n\t\t}\n\t\tif (!this.imgloadStartComplete) {\n\t\t\tthis.setLoadImage();\n\t\t}\n\t\tthis.indicator.resume(video ? video.duration : null);\n\t};\n\tsetVideoMetaData = (id, instance, duration) => {\n\t\tinstance.pause();\n\t\tthis.metaInfoList[id] = { instance: instance, duration: duration };\n\t};\n\tsetMedialoaded = (id, instance) => {\n\t\tif (!this.imgLoadedList[id]) {\n\t\t\tthis.imgLoadedList[id] = true;\n\t\t}\n\t\tif (this.imgLoadCheckerFlag && this.imgLoadedList[this.currentSlide]) {\n\t\t\tconst cont = document.querySelector(\"html\");\n\t\t\tcont.classList.remove(`page-load`);\n\n\t\t\tthis.indicatorResume();\n\t\t}\n\t};\n\timgLoadedChecker = (init) => {\n\t\tthis.imgLoadCheckerFlag = false;\n\t\tif (this.imgLoadedList[this.currentSlide]) {\n\t\t\tconst cont = document.querySelector(\"html\");\n\t\t\tcont.classList.remove(`page-load`);\n\t\t\tthis.indicatorResume();\n\t\t} else {\n\t\t\tconst cont = document.querySelector(\"html\");\n\t\t\tcont.classList.add(`page-load`);\n\t\t\tthis.imgLoadCheckerFlag = true;\n\t\t}\n\t};\n\tcomponentDidMount() {\n\t\tthis.itemNum = this.items.length;\n\n\t\tif (typeof window !== `undefined`) {\n\t\t\tthis.setState({ ready: true });\n\t\t}\n\t\tthis.storyItems = document.getLibs.AtomsByClassName(\"story-item\");\n\t}\n\tsetLoadImage = () => {\n\t\tconst me = this;\n\t\tsetTimeout(function() {\n\t\t\t//console.log(\"this -- \", me.storyItems)\n\t\t\tme.loadImage();\n\t\t}, 200);\n\t};\n\tloadImage = () => {\n\t\tconst me = this;\n\t\tconst len =\n\t\t\tthis.isInitLoadCounter && this.isInitLoadCounter < me.storyItems.length\n\t\t\t\t? this.isInitLoadCounter\n\t\t\t\t: me.storyItems.length;\n\n\t\tif (me.loadImageCounter < len) {\n\t\t\tme.storyItems[me.loadImageCounter].style.display = \"block\";\n\t\t\tme.loadImageCounter++;\n\n\t\t\tif (me.loadImageCounter == me.storyItems.length) {\n\t\t\t\tme.imgloadStartComplete = true;\n\t\t\t} else if (me.isInitLoadCounter == me.loadImageCounter) {\n\t\t\t\tme.isInitLoadCounter = null;\n\t\t\t} else {\n\t\t\t\tme.setLoadImage();\n\t\t\t}\n\t\t}\n\t};\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\tconst cont = document.querySelector(\"html\");\n\n\t\tif (nextProps.screenH !== this.storyCont.clientHeight) {\n\t\t\tthis.storyCont.style.height = `${nextProps.screenH}px`;\n\t\t\treturn true;\n\t\t}\n\t\tif (cont.classList.contains(\"now-transition\")) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.currentContentName !== nextProps.current) {\n\t\t\tthis.currentContentName = nextProps.current;\n\t\t\t//this.indicator.init(this.itemNum)\n\n\t\t\tthis.indicator.init(this.itemNum, this.metaInfoList);\n\t\t\tthis.setLoadImage();\n\t\t\tthis.imgLoadedChecker(true);\n\t\t\treturn false;\n\t\t} else {\n\t\t\tif (!isNaN(nextProps.sliderId)) {\n\t\t\t\tif (this.metaInfoList[this.currentSlide]) {\n\t\t\t\t\tthis.metaInfoList[this.currentSlide].instance.pause();\n\t\t\t\t}\n\t\t\t\tthis.currentSlide = nextProps.sliderId;\n\t\t\t\tthis.imgLoadedChecker();\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\trender() {\n\t\tconst { story, slug, next, prev, category } = this.props;\n\t\tconst items = this.items;\n\n\t\tthis.mediaCounter = 0;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={this.storyContCss}\n\t\t\t\tref={(el) => {\n\t\t\t\t\tthis.storyCont = el;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Modules.SliderIndicators\n\t\t\t\t\tlen={items.length}\n\t\t\t\t\tnext={next}\n\t\t\t\t\tprev={prev}\n\t\t\t\t\tcategory={category}\n\t\t\t\t\tref={(el) => {\n\t\t\t\t\t\tthis.indicator = el;\n\t\t\t\t\t}}\n\t\t\t\t></Modules.SliderIndicators>\n\n\t\t\t\t<div className={\"playpause bc-button\"} css={this.resumeButtonCss}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName={\"bc-button\"}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tvalue=\"None\"\n\t\t\t\t\t\tid=\"playpause\"\n\t\t\t\t\t\tname=\"check\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label\n\t\t\t\t\t\tclassName={\"bc-button\"}\n\t\t\t\t\t\tfor=\"playpause\"\n\t\t\t\t\t\ttabindex=\"1\"\n\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\tthis.resumeClickHandler();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className={\"bc-button\"}></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<Libs.Atoms.ButtonClose\n\t\t\t\t\tcss={this.closeButtonCss}\n\t\t\t\t\tcolor={\"#fff\"}\n\t\t\t\t\tactiveClass={\"on-story\"}\n\t\t\t\t\tclickHandler={this.closeClickHandler}\n\t\t\t\t/>\n\t\t\t\t<Libs.Atoms.LinkElement\n\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\tthis.helpClickHandler();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}}\n\t\t\t\t\tstyles={{\n\t\t\t\t\t\turl: \"\",\n\t\t\t\t\t\tfontPc: {\n\t\t\t\t\t\t\tfontSize: 20,\n\t\t\t\t\t\t\tbold: true,\n\t\t\t\t\t\t\tcolor: \"#fff\",\n\t\t\t\t\t\t\tletterSpacing: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfontSp: {\n\t\t\t\t\t\t\tfontSize: 20,\n\t\t\t\t\t\t\tbold: true,\n\t\t\t\t\t\t\tcolor: \"#fff\",\n\t\t\t\t\t\t\tletterSpacing: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tcss={this.helpButtonCss}\n\t\t\t\t>\n\t\t\t\t\tHELP\n\t\t\t\t</Libs.Atoms.LinkElement>\n\t\t\t\t<div css={this.contentContCss}>\n\t\t\t\t\t{items &&\n\t\t\t\t\t\titems.map((item, i) => {\n\t\t\t\t\t\t\tif (item.__typename === \"ContentfulElementBlock\") {\n\t\t\t\t\t\t\t\treturn this.getBlockElement(item, false, i);\n\t\t\t\t\t\t\t} else if (item.__typename === \"ContentfulElementImage\") {\n\t\t\t\t\t\t\t\treturn this.getElementImage(\n\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\tthis.contentWrapperCss,\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nconst mapStateToProps = (state, filter) => {\n\treturn {\n\t\tsliderId: Number(state.SliderReducer.sliderId),\n\t\tcurrent: state.TransitionReducer.current,\n\t\tscreenH: state.ResizeReducer.screenHeight,\n\t};\n};\n\nexport default connect(mapStateToProps)(StoryElement);\n"],"sourceRoot":""}